var d=!0,g=null,i=!1;function k(){return function(){}}var m=jQuery,v=window,w=document;m.v.M=function(n){return new x(this,n)};m.extend(m.v,{z:function(n){return 0<m(this).ba().filter(n).length},B:function(){return m(this).Q().K("<div>").parent().f()}});
function x(n,y){function r(b,h){"PUT"===a.options.method.toUpperCase()&&"undefined"===typeof h&&c("PUT request requires queue index, progressBar will not work!");var f=m("#"+("PUT"===a.options.method.toUpperCase()&&"undefined"!==typeof h?"bar_"+h:"bar_filelist"));f&&f.show();var j=new XMLHttpRequest;j.upload.addEventListener("progress",function(a){a=Math.round(100*(a.position||a.loaded)/(a.ga||a.total));f&&f.J(a)},i);j.addEventListener("load",function(){a.a.length=0},i);j.addEventListener("error",
function(){a.a.length=0},i);j.open(a.options.method.toUpperCase(),a.options.action);"PUT"===a.options.method.toUpperCase()&&b.name&&j.setRequestHeader("X-File-Name",b.name);j.send(b)}function o(b){if("undefined"===typeof FileReader)c("Browser does not support HTML5 File API");else{var h=new FileReader;h.readAsDataURL(b);h.onloadend=function(b){b=b.target.result;if(b!==g){var c=a.options.g;c.e("class","file-preview");var e=m("<img>");e.e("src",b);e.e("alt"," ");a.options.q!==g&&e.load(function(){var b=
a.options.q,c=this.height>this.width?b:Math.ceil(this.height/this.width*b),b=this.height>this.width?Math.ceil(this.width/this.height*b):b;m(this).d({height:c,width:b})});c.append(e)}}}}function z(){content=0<m(this).m().find("body").find("pre").length?m(this).m().find("body").find("pre").f():m(this).m().find("body").f();m.ca(content)===g&&c("Response was not valid JSON")}function t(b){b=b||i;a.c=a.element.h("div")?a.element:a.options.c;a.c?(a.c.f(""),a.c.append("<span></span>").d("text-align","center").d("display",
"table-cell").d("vertical-align","middle"),"undefined"===typeof FileReader?(a.c.find("span").f("Drag and Drop not supported! <br>Update your browser!!!").l("dropzone-text").d("color","white").d("top","50%"),a.c.d("background-color","red")):(a.c.find("span").f(a.options.t).l("dropzone-text").d("color","grey").d("top","50%"),!b&&(new XMLHttpRequest).upload&&(a.c.k("dragover",A),a.c.k("dragleave",B),a.c.k("drop",C)))):c("No dropZone specified, can not initialize.")}function C(b){m(this).d("background-color",
"#FFF");b=b.aa.dataTransfer.files;if(0<b.length)if(a.options.multiple)m.o(b,function(b,f){if(!p())return c("File limit of "+a.options.i+" has been reached. The queue is full!"),i;a.a.push(f);a.options.g&&o(f)});else{b=b[0];if(!p())return c("File limit of "+a.options.i+" has been reached. The queue is full!"),i;a.a.push(b);a.options.g&&o(b)}q();a.options.j&&a.send();return i}function A(b){b.stopPropagation();b.preventDefault();m(this).d("background-color",a.options.u)}function B(a){a.stopPropagation();
a.preventDefault();m(this).d("background-color","#FFF")}function c(b){a.options.debug&&console.log(b)}function p(){return a.a.length>=a.options.i&&0!=a.options.i?i:d}function q(){var b=a.options.C;c("Queue: ");c(a.a);for(var h=[],f=0,j;j=a.a[f];f++){var e="<li><span>";b.name&&(e+="<strong>"+escape(j.name)+"</strong>");if(!m.s.A){b.type&&(e+=" "+j.type+" ");if(b.size){var l;l=j.size;var s=0;if(0==l)l="n/a";else{for(;1024<=l;)s++,l/=1024;l=Number(l).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][s]}e+=
" "+l}b.lastModified&&(e+=j.lastModifiedDate?" "+j.lastModifiedDate.toLocaleDateString():" n/a")}e+="</span>";b.p&&"PUT"===a.options.method.toUpperCase()&&(e+='<progress id="bar_'+f+'" class="progress-bar" max="100" value="0"></progress>');e+="</li>";h.push(e)}a.options.a.f('<ul id="queue_list">'+h.join("")+"</ul>");b.p&&("POST"===a.options.method.toUpperCase()&&a.options.a.append(m('<progress id="bar_filelist" class="progress-bar" max="100" value="0"></progress>')),m("#queue_list").find("progress").d("margin-left",
"7px"));a.options.I?a.options.a.show():a.options.a.V()}var a=this,u=g;a.version="0.0.1";a.options={};a.a=[];a.element=g;a.b=g;a.c=g;a.r=d;a.options=m.extend({i:0,multiple:i,a:g,I:d,C:{name:d,type:d,size:d,lastModified:d,p:d},q:g,j:d,debug:d,n:d,T:"image",N:g,c:g,t:"Drop files here...",b:g,g:g,S:"20px",u:"#99CCFF",fa:0,method:"post",action:"upload.php",W:k(),Z:k(),X:k(),Y:k(),P:k()},y||{});a.element=n;a.reset=function(){a.H();a.G();a.D();a.F();c("Reset")};a.D=function(){t(d);c("Dropzone Reset")};a.F=
function(){a.b!=g&&a.b.ea(u);a.b=m(".upload-input");c("Input Reset")};a.H=function(){a.a.length=0;a.options.a.f("");c("Queue reset");c("Queue: ");c(a.a)};a.G=function(){a.options.g&&a.options.g.f("");c("Preview Cleared")};a.U=function(){c("Queue: ");c(a.a)};a.send=function(){if(0>=a.a.length)c("No files to upload");else if(a.r){var b=new FormData;m.o(a.a,function(c,e){b.append("file-"+c,e);"PUT"===a.options.method.toUpperCase()&&r(e,c)});"POST"===a.options.method.toUpperCase()&&r(b)}else{var h;c("Can not use normal input, falling back to iFrame hack!");
(function e(a){var b=0<a?"upload_frame_"+a:"upload_frame";h=m("#"+b);0>=h.length?(h=m("<iframe/>",{name:b,id:b,"class":"hidden",src:"",width:0,height:0,border:0}).O(m(w).find("body")),h.d("display","none"),h.$("load",z)):(c('iFrame with id "'+b+'" already exists'),e(++a))})(0);a.b.z("form")||a.b.K("<form>");var f=a.b.R("form");f.e("action",a.options.action);f.e("target",h.e("id"));f.e("method","post");f.e("enctype","multipart/form-data");f.e("encoding","multipart/form-data");f.submit()}};if(a.options.w&&
a.element.h("input"))c("Can not attach to an input and specify an input. Please choose one!");else if(a.options.n&&a.options.c!==g&&a.element.h("div"))c("Can not attach to a dropzone and specify a dropzone. Please choose one!");else{c("Options: ");c(a.options);a.r="undefined"===typeof v.L?i:d;if(a.options.b||a.element.h("input"))a.b=a.element.h("input")?a.element:a.options.w,(a.b==g||!a.b.h("input"))&&c("No <input> element found"),a.b.l("upload-input"),a.options.multiple?a.b.e("multiple","multiple"):
a.b.da("multiple"),u=a.b.B(),a.b.k("change",function(b){m.s.A?setTimeout(function(){var b={name:a.b.J().split("\\").pop()};a.a.push(b);a.options.g&&o(b);q();a.options.j&&a.send()},0):(c("Selected files: "),c(b.target.files),a.options.multiple||c("Selecting multiple files is disabled."),m.o(b.target.files,function(b,f){if(!p())return c("File limit of "+a.options.i+" has been reached. The queue is full!"),i;a.a.push(f);a.options.g&&o(f)}),q(),a.options.j&&a.send())});(a.options.n&&a.options.c!==g||
a.element.h("div"))&&t()}};